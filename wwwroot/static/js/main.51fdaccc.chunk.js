(this["webpackJsonpiot-dashboard"]=this["webpackJsonpiot-dashboard"]||[]).push([[0],{32:function(e,t,a){e.exports=a(69)},37:function(e,t,a){},38:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),s=a(26),c=a.n(s);a(37),a(38);!function(e){e[e.NetatmoCurrent=0]="NetatmoCurrent",e[e.NetatmoSeries=1]="NetatmoSeries",e[e.PhilipsHue=2]="PhilipsHue",e[e.Wunderlist=3]="Wunderlist"}(n||(n={}));var o=a(11),u=a(13),l=a(2),h=a(3),d=a(5),m=a(4),p=a(6),f=(a(41),a(8)),b=a.n(f),v=a(10),y=a(9),g=(a(43),a(27)),O=a(12),j=a.n(O);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var E,w=function(e,t){var a=j.a.CancelToken.source();j.a.defaults.baseURL="",j.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{cancelToken:a.token,headers:{"Content-Type":"application/json",Accept:"application/json"}});return[j.a.get(e,n),a.cancel.bind(a)]},x=function(){function e(){Object(l.a)(this,e),this.baseUrl="/api/v1/data/wunderlist"}return Object(h.a)(e,[{key:"getWunderlist",value:function(){return w(this.baseUrl,null)}}]),e}(),N=a(28),L=a.n(N),C=(a(63),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={loading:e.isLoading},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"loader-container"},i.a.createElement("div",{className:"loading"},i.a.createElement(L.a,{sizeUnit:"px",size:20,color:"#003f5c",loading:this.state.loading})))}}]),t}(i.a.Component)),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._wunderlistApi=void 0,a._abort=void 0,a._wunderlistApi=new x,a.state={wunderlists:[],isLoading:!0},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(b.a.mark((function e(){var t,a,n,r,i,s=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this._wunderlistApi.getWunderlist(),a=Object(v.a)(t,2),n=a[0],r=a[1],this._abort=r,e.next=5,n;case 5:if((i=e.sent).data){e.next=8;break}return e.abrupt("return");case 8:this.setState({wunderlists:i.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:return e.prev=14,setTimeout((function(){s.setState({isLoading:!1})}),1e3),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._abort()}},{key:"renderList",value:function(e){return i.a.createElement("div",{className:"list-container"},i.a.createElement("h4",null,e.name),i.a.createElement("div",{className:"tasks"},e.tasks.map((function(e){return i.a.createElement("span",{className:"task-row"},e.name," (",e.type,")")}))))}},{key:"render",value:function(){var e=this;return this.state.isLoading?i.a.createElement(C,{isLoading:this.state.isLoading}):this.state.wunderlists.length<1&&!this.state.isLoading?i.a.createElement("div",{className:"wunderlist-container"},i.a.createElement("h4",null,"Failed to load any wunderlists =(")):i.a.createElement("div",{className:"wunderlist-container"},this.state.wunderlists.map((function(t){return e.renderList(t)})))}}]),t}(i.a.Component),_=function(){function e(){Object(l.a)(this,e),this.baseUrl="/api/v1/data/netatmo"}return Object(h.a)(e,[{key:"getCurrent",value:function(){return w("".concat(this.baseUrl,"/current"),null)}},{key:"getSeries",value:function(){return w("".concat(this.baseUrl,"/series"),null)}}]),e}(),T=a(15),D=a.n(T),P=a(30),A=a.n(P);a(64);!function(e){e[e.Temperature=0]="Temperature",e[e.Humidity=1]="Humidity"}(E||(E={}));var H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).chartRef=void 0,a.state={chartOptions:{chart:{zoomType:"xy"},xAxis:{type:"datetime"},yAxis:[{labels:{format:"{value}\xb0C"},title:{text:"Temperature"},opposite:!1},{labels:{format:"{value} %"},title:{text:"Humidity"},min:0,max:100,opposite:!0}],series:a.props.series.map((function(e){return{data:e.values.map((function(e){return[a.getTicksFromTimestamp(e.timestamp),e.value]})),name:e.name,yAxis:e.type===E.Temperature?0:1,dashStyle:e.type===E.Humidity?"shortdot":"solid"}})),credits:{enabled:!1}},height:"100%",width:"100%"},a.chartRef=r.createRef(),a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"getTicksFromTimestamp",value:function(e){return new Date(e).getTime()}},{key:"updateDimensions",value:function(){this.chartRef.current.chart.reflow()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.chartOptions,a=e.height,n=e.width;return r.createElement("div",{className:"highcharts-container"},r.createElement(A.a,Object.assign({ref:this.chartRef,containerProps:{style:{height:a,width:n}},highcharts:D.a,options:t},this.props)))}}]),t}(r.Component),W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._netatmoApi=void 0,a._abort=void 0,a._netatmoApi=new _,a.state={series:[],isLoading:!0},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(b.a.mark((function e(){var t,a,n,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this._netatmoApi.getSeries(),a=Object(v.a)(t,2),n=a[0],r=a[1],this._abort=r,e.next=5,n;case 5:if((i=e.sent).data){e.next=8;break}return e.abrupt("return");case 8:this.setState({series:i.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:return e.prev=14,this.setState({isLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._abort()}},{key:"render",value:function(){return this.state.isLoading?i.a.createElement(C,{isLoading:this.state.isLoading}):this.state.series.length<1&&!this.state.isLoading?i.a.createElement("h4",null,"Couldn't load any series =("):i.a.createElement(H,{series:this.state.series})}}]),t}(i.a.Component),U=(a(65),function(e){return i.a.createElement("div",{className:"current-row-container"},i.a.createElement("span",{className:"header"},e.header),i.a.createElement("span",{className:"data"},e.data))}),M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._netatmoApi=void 0,a._abort=void 0,a._netatmoApi=new _,a.state={currentData:[],isLoading:!0},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(b.a.mark((function e(){var t,a,n,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this._netatmoApi.getCurrent(),a=Object(v.a)(t,2),n=a[0],r=a[1],this._abort=r,e.next=5,n;case 5:if((i=e.sent).data){e.next=8;break}return e.abrupt("return");case 8:this.setState({currentData:i.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:return e.prev=14,this.setState({isLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._abort()}},{key:"renderData",value:function(e){return i.a.createElement("div",{key:e.name},i.a.createElement("h2",{className:"module-header"},e.name),i.a.createElement(U,{header:"Current temp",data:e.temperature}),i.a.createElement(U,{header:"Min temp (24 h)",data:e.minTemp}),i.a.createElement(U,{header:"Max temp (24 h)",data:e.maxTemp}),i.a.createElement(U,{header:"Temp trend",data:e.tempTrend}),i.a.createElement(U,{header:"Humidity",data:e.humidity}),i.a.createElement(U,{header:"Absolute pressure",data:e.absolutePressure}),i.a.createElement(U,{header:"Pressure",data:e.pressure}))}},{key:"render",value:function(){var e=this;return this.state.isLoading?i.a.createElement(C,{isLoading:this.state.isLoading}):this.state.currentData.length<1&&!this.state.isLoading?i.a.createElement("h4",null,"Failed to load Philips Hue status =("):i.a.createElement("div",{className:"netatmo-current-container"},this.state.currentData.map((function(t){return e.renderData(t)})))}}]),t}(i.a.Component),R=a(31),z=function(){function e(){Object(l.a)(this,e),this.baseUrl="/api/v1/data/hue"}return Object(h.a)(e,[{key:"getHue",value:function(){return w(this.baseUrl,null)}}]),e}(),F=(a(68),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._hueApi=void 0,a._abort=void 0,a._hueApi=new z,a.state={lights:[],isLoading:!0},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(b.a.mark((function e(){var t,a,n,r,i,s=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this._hueApi.getHue(),a=Object(v.a)(t,2),n=a[0],r=a[1],this._abort=r,e.next=5,n;case 5:if((i=e.sent).data){e.next=8;break}return e.abrupt("return");case 8:this.setState({lights:i.data.lights}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:return e.prev=14,setTimeout((function(){s.setState({isLoading:!1})}),1e3),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._abort()}},{key:"getHueStyle",value:function(e){return{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"#".concat(e)}}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return i.a.createElement(C,{isLoading:this.state.isLoading});if(this.state.lights.length<1&&!this.state.isLoading)return i.a.createElement("div",{className:"lights-container"},i.a.createElement("h4",null,"Failed to load hue lights =("));var t=this.state.lights.map((function(t){return i.a.createElement("div",{className:"light-row"},i.a.createElement(R.a,{color:t.on?"green":"red",size:"3x",icon:"lightbulb"}),i.a.createElement("span",{className:"light-name"},t.name),i.a.createElement("span",{style:e.getHueStyle(t.hexColor)}))}));return i.a.createElement("div",{className:"lights-container"},t)}}]),t}(i.a.Component)),B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={type:e.type,title:""},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){switch(this.state.type){case n.NetatmoCurrent:this.setState({title:"Current temperature data"});break;case n.NetatmoSeries:this.setState({title:"Temperature/Humidity last week"});break;case n.PhilipsHue:this.setState({title:"Philips Hue status"});break;case n.Wunderlist:this.setState({title:"Wunderlists"})}}},{key:"componentWillUnmount",value:function(){}},{key:"renderCardType",value:function(){switch(this.state.type){case n.NetatmoCurrent:return i.a.createElement(M,null);case n.NetatmoSeries:return i.a.createElement(W,null);case n.PhilipsHue:return i.a.createElement(F,null);case n.Wunderlist:return i.a.createElement(S,null);default:return i.a.createElement("div",null,"This type is not supported ... Where did you get it?")}}},{key:"render",value:function(){return i.a.createElement("div",{className:"dashboard-card-container"},i.a.createElement("div",{className:"dashboard-card"},i.a.createElement("div",{className:"card-header"},this.state.title),i.a.createElement("div",{className:"card-body"},this.renderCardType())))}}]),t}(i.a.Component),J=function(){return o.b.add(u.c,u.b,u.a),i.a.createElement("div",{className:"App"},i.a.createElement(B,{type:n.NetatmoCurrent}),i.a.createElement(B,{type:n.NetatmoSeries}),i.a.createElement(B,{type:n.PhilipsHue}),i.a.createElement(B,{type:n.Wunderlist}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.51fdaccc.chunk.js.map